<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KakeAI â€” å®¶è¨ˆãƒ»å°†æ¥è¨­è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0e1a;
    --bg2: #0f1524;
    --card: #131929;
    --card2: #1a2235;
    --border: rgba(255,255,255,0.07);
    --accent: #4af0b0;
    --accent2: #6c8fff;
    --accent3: #ff7eb3;
    --warn: #ffb547;
    --text: #e8edf8;
    --text2: #7a8aaa;
    --text3: #3d4d6a;
    --green: #2edd8e;
    --red: #ff5f6d;
    --radius: 16px;
    --radius-sm: 10px;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Noto Sans JP', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Layout */
  .app { display: flex; min-height: 100vh; }
  
  /* Sidebar */
  .sidebar {
    width: 240px;
    background: var(--bg2);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    padding: 28px 0;
    position: fixed;
    top: 0; left: 0; bottom: 0;
    z-index: 100;
  }
  .logo {
    padding: 0 24px 32px;
    font-family: 'Syne', sans-serif;
    font-size: 20px;
    font-weight: 800;
    letter-spacing: -0.5px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .logo-icon {
    width: 32px; height: 32px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px;
  }
  .logo span { color: var(--accent); }

  .nav-section { padding: 0 12px 8px; margin-bottom: 4px; }
  .nav-label {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text3);
    padding: 0 12px 8px;
  }
  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 13.5px;
    color: var(--text2);
    transition: all 0.2s;
    font-weight: 400;
    position: relative;
  }
  .nav-item:hover { background: var(--border); color: var(--text); }
  .nav-item.active {
    background: rgba(74, 240, 176, 0.1);
    color: var(--accent);
    font-weight: 500;
  }
  .nav-item.active::before {
    content: '';
    position: absolute;
    left: 0; top: 20%; bottom: 20%;
    width: 3px;
    background: var(--accent);
    border-radius: 0 2px 2px 0;
  }
  .nav-icon { width: 18px; text-align: center; font-size: 15px; }
  
  .sidebar-bottom {
    margin-top: auto;
    padding: 16px 12px 0;
    border-top: 1px solid var(--border);
  }

  /* Main */
  .main {
    margin-left: 240px;
    flex: 1;
    padding: 32px;
    max-width: calc(100% - 240px);
  }

  /* Header */
  .page-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 32px;
  }
  .page-title {
    font-family: 'Syne', sans-serif;
    font-size: 26px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }
  .page-sub { color: var(--text2); font-size: 13px; margin-top: 4px; }
  .header-actions { display: flex; gap: 10px; align-items: center; }
  
  .btn {
    padding: 9px 18px;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
    font-family: inherit;
  }
  .btn-primary {
    background: var(--accent);
    color: #0a1a12;
  }
  .btn-primary:hover { background: #3ddca0; transform: translateY(-1px); }
  .btn-ghost {
    background: var(--card2);
    color: var(--text);
    border: 1px solid var(--border);
  }
  .btn-ghost:hover { border-color: var(--accent); color: var(--accent); }

  /* Grid */
  .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px; }
  .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px; }
  .grid-65 { display: grid; grid-template-columns: 1.8fr 1fr; gap: 16px; margin-bottom: 20px; }

  /* Cards */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
  }
  .card-title {
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    color: var(--text2);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  /* Stat Cards */
  .stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    position: relative;
    overflow: hidden;
  }
  .stat-card::after {
    content: '';
    position: absolute;
    top: 0; right: 0;
    width: 80px; height: 80px;
    border-radius: 50%;
    filter: blur(30px);
    opacity: 0.15;
  }
  .stat-card.green::after { background: var(--green); }
  .stat-card.blue::after { background: var(--accent2); }
  .stat-card.orange::after { background: var(--warn); }

  .stat-label { font-size: 12px; color: var(--text2); font-weight: 500; margin-bottom: 10px; }
  .stat-value {
    font-family: 'Syne', sans-serif;
    font-size: 28px;
    font-weight: 700;
    letter-spacing: -1px;
    margin-bottom: 6px;
  }
  .stat-change {
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .stat-change.up { color: var(--green); }
  .stat-change.down { color: var(--red); }

  /* Progress */
  .progress-track {
    background: var(--bg);
    border-radius: 99px;
    height: 6px;
    overflow: hidden;
    margin: 6px 0;
  }
  .progress-fill {
    height: 100%;
    border-radius: 99px;
    transition: width 1s ease;
  }

  /* Budget Items */
  .budget-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
  }
  .budget-item:last-child { border-bottom: none; }
  .budget-dot {
    width: 10px; height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .budget-name { flex: 1; font-size: 13.5px; }
  .budget-amounts { text-align: right; }
  .budget-spent { font-size: 13.5px; font-weight: 500; }
  .budget-limit { font-size: 11px; color: var(--text2); }
  .budget-pct { font-size: 12px; width: 36px; text-align: right; }

  /* Probability Gauge */
  .gauge-wrap { display: flex; align-items: center; justify-content: center; padding: 10px 0; }
  .gauge-container { position: relative; }
  canvas.gauge { display: block; }
  .gauge-center {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -30%);
    text-align: center;
  }
  .gauge-pct {
    font-family: 'Syne', sans-serif;
    font-size: 36px;
    font-weight: 800;
    color: var(--accent);
  }
  .gauge-label { font-size: 11px; color: var(--text2); }

  /* Chart area */
  .chart-area { position: relative; height: 180px; }
  canvas.chart { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

  /* Transactions */
  .tx-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
  }
  .tx-item:last-child { border-bottom: none; }
  .tx-icon {
    width: 36px; height: 36px;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
  }
  .tx-info { flex: 1; }
  .tx-name { font-size: 13.5px; font-weight: 500; }
  .tx-cat { font-size: 11px; color: var(--text2); }
  .tx-date { font-size: 11px; color: var(--text3); }
  .tx-amount { font-size: 14px; font-weight: 600; }
  .tx-amount.neg { color: var(--red); }
  .tx-amount.pos { color: var(--green); }

  /* Chat Setup */
  .chat-overlay {
    position: fixed;
    inset: 0;
    background: rgba(10,14,26,0.85);
    backdrop-filter: blur(8px);
    z-index: 200;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }
  .chat-overlay.open { opacity: 1; pointer-events: all; }
  .chat-modal {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    width: 520px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transform: translateY(20px);
    transition: transform 0.3s;
  }
  .chat-overlay.open .chat-modal { transform: translateY(0); }
  .chat-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .chat-header h3 { font-family: 'Syne', sans-serif; font-size: 17px; font-weight: 700; }
  .chat-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px 24px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  .msg {
    display: flex;
    gap: 10px;
    max-width: 90%;
  }
  .msg.bot { align-self: flex-start; }
  .msg.user { align-self: flex-end; flex-direction: row-reverse; }
  .msg-avatar {
    width: 28px; height: 28px;
    border-radius: 8px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    display: flex; align-items: center; justify-content: center;
    font-size: 12px;
    flex-shrink: 0;
  }
  .msg-bubble {
    background: var(--card2);
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 13.5px;
    line-height: 1.6;
  }
  .msg.user .msg-bubble {
    background: rgba(74,240,176,0.15);
    border: 1px solid rgba(74,240,176,0.2);
  }
  .msg-options { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 4px; }
  .msg-opt {
    padding: 6px 12px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 99px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    font-family: inherit;
    color: var(--text);
  }
  .msg-opt:hover { border-color: var(--accent); color: var(--accent); }
  .chat-input-area {
    padding: 16px 24px;
    border-top: 1px solid var(--border);
    display: flex;
    gap: 10px;
  }
  .chat-input {
    flex: 1;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 10px 14px;
    color: var(--text);
    font-size: 13.5px;
    font-family: inherit;
    outline: none;
    transition: border-color 0.2s;
  }
  .chat-input:focus { border-color: var(--accent); }

  /* Add Expense Modal */
  .expense-modal {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    width: 440px;
    overflow: hidden;
    transform: translateY(20px);
    transition: transform 0.3s;
  }
  .chat-overlay.open .expense-modal { transform: translateY(0); }
  .form-group { margin-bottom: 16px; }
  .form-label { font-size: 12px; color: var(--text2); font-weight: 500; margin-bottom: 6px; display: block; }
  .form-input, .form-select {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 10px 14px;
    color: var(--text);
    font-size: 14px;
    font-family: inherit;
    outline: none;
    transition: border-color 0.2s;
  }
  .form-input:focus, .form-select:focus { border-color: var(--accent); }
  .form-select option { background: var(--card); }
  .cat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
  .cat-chip {
    padding: 8px 6px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 11px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
  }
  .cat-chip.sel { border-color: var(--accent); background: rgba(74,240,176,0.1); color: var(--accent); }
  .cat-chip span { display: block; font-size: 18px; margin-bottom: 3px; }

  /* Tabs */
  .tabs { display: flex; gap: 4px; margin-bottom: 20px; background: var(--card); padding: 4px; border-radius: var(--radius-sm); width: fit-content; }
  .tab {
    padding: 7px 16px;
    border-radius: 7px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text2);
    font-weight: 500;
  }
  .tab.active { background: var(--card2); color: var(--text); }

  /* Tag */
  .tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 99px;
    font-size: 11px;
    font-weight: 600;
  }
  .tag.green { background: rgba(46,221,142,0.15); color: var(--green); }
  .tag.red { background: rgba(255,95,109,0.15); color: var(--red); }
  .tag.blue { background: rgba(108,143,255,0.15); color: var(--accent2); }
  .tag.orange { background: rgba(255,181,71,0.15); color: var(--warn); }

  /* Life Goals */
  .goal-card {
    background: var(--card2);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 14px;
    margin-bottom: 10px;
  }
  .goal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
  .goal-title { font-size: 13.5px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
  .goal-year { font-size: 11px; color: var(--text2); }
  .goal-amounts { display: flex; justify-content: space-between; font-size: 12px; color: var(--text2); margin-top: 6px; }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--text3); border-radius: 99px; }

  /* Animations */
  @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  .card, .stat-card { animation: fadeUp 0.4s ease both; }
  .stat-card:nth-child(1) { animation-delay: 0.05s; }
  .stat-card:nth-child(2) { animation-delay: 0.1s; }
  .stat-card:nth-child(3) { animation-delay: 0.15s; }

  /* Section hidden */
  .section { display: none; }
  .section.active { display: block; }

  .divider { height: 1px; background: var(--border); margin: 4px 0 16px; }

  /* Advice cards */
  .advice-card {
    background: linear-gradient(135deg, rgba(74,240,176,0.06), rgba(108,143,255,0.06));
    border: 1px solid rgba(74,240,176,0.15);
    border-radius: var(--radius-sm);
    padding: 14px;
    margin-bottom: 10px;
  }
  .advice-title { font-size: 13px; font-weight: 600; margin-bottom: 6px; color: var(--accent); }
  .advice-text { font-size: 12.5px; color: var(--text2); line-height: 1.7; }

  /* Notification dot */
  .notif { 
    width: 18px; height: 18px;
    background: var(--red);
    border-radius: 99px;
    font-size: 10px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 700;
    margin-left: auto;
  }

  /* close btn */
  .close-btn {
    width: 28px; height: 28px;
    border-radius: 8px;
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text2);
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px;
    transition: all 0.2s;
  }
  .close-btn:hover { color: var(--text); border-color: var(--text2); }
</style>
</head>
<body>
<div class="app">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-icon">ğŸ’°</div>
      Life<span>Balance</span>
    </div>

    <div class="nav-section">
      <div class="nav-label">ãƒ¡ã‚¤ãƒ³</div>
      <div class="nav-item active" onclick="showSection('dashboard', this)">
        <span class="nav-icon">ğŸ“Š</span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
      </div>
      <div class="nav-item" onclick="showSection('expense', this)">
        <span class="nav-icon">ğŸ’³</span> æ”¯å‡ºç®¡ç†
        <div class="notif">3</div>
      </div>
      <div class="nav-item" onclick="showSection('budget', this)">
        <span class="nav-icon">ğŸ¯</span> äºˆç®—ãƒ»ç›®æ¨™
      </div>
      <div class="nav-item" onclick="showSection('future', this)">
        <span class="nav-icon">ğŸ”®</span> å°†æ¥è¨­è¨ˆ
      </div>
    </div>

    <div class="divider" style="margin: 8px 12px;"></div>

    <div class="nav-section">
      <div class="nav-label">åˆ†æ</div>
      <div class="nav-item" onclick="showSection('advice', this)">
        <span class="nav-icon">ğŸ’¡</span> AIã‚¢ãƒ‰ãƒã‚¤ã‚¹
      </div>
      <div class="nav-item">
        <span class="nav-icon">ğŸ“ˆ</span> ãƒ¬ãƒãƒ¼ãƒˆ
      </div>
    </div>

    <div class="sidebar-bottom">
      <div class="nav-item" onclick="openChat('setup')">
        <span class="nav-icon">âš™ï¸</span> åˆæœŸè¨­å®šï¼ˆãƒãƒ£ãƒƒãƒˆï¼‰
      </div>
      <div class="nav-item">
        <span class="nav-icon">ğŸ”—</span> å¤–éƒ¨é€£æº
      </div>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">

    <!-- DASHBOARD -->
    <div id="dashboard" class="section active">
      <div class="page-header">
        <div>
          <div class="page-title">ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€ç”°ä¸­ã•ã‚“ ğŸ‘‹</div>
          <div class="page-sub">2025å¹´6æœˆ â€” ä»Šæœˆã®æ®‹ã‚Šäºˆç®—ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</div>
        </div>
        <div class="header-actions">
          <button class="btn btn-ghost" onclick="openChat('setup')">ğŸ¤– ãƒãƒ£ãƒƒãƒˆè¨­å®š</button>
          <button class="btn btn-primary" onclick="openExpenseModal()">ï¼‹ æ”¯å‡ºã‚’è¿½åŠ </button>
        </div>
      </div>

      <!-- Stats -->
      <div class="grid-3">
        <div class="stat-card green">
          <div class="stat-label">ä»Šæœˆã®æ”¯å‡º</div>
          <div class="stat-value">Â¥143,200</div>
          <div class="stat-change down">â–² å…ˆæœˆæ¯” +Â¥8,300</div>
          <div style="margin-top: 12px;">
            <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text2);margin-bottom:4px;">
              <span>äºˆç®— Â¥180,000</span><span>79.6%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:79.6%;background:var(--warn);"></div>
            </div>
          </div>
        </div>
        <div class="stat-card blue">
          <div class="stat-label">ä»Šæœˆã®è²¯è“„</div>
          <div class="stat-value">Â¥56,800</div>
          <div class="stat-change up">â–² ç›®æ¨™é”æˆç‡ 94.7%</div>
          <div style="margin-top: 12px;">
            <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text2);margin-bottom:4px;">
              <span>ç›®æ¨™ Â¥60,000</span><span>94.7%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:94.7%;background:var(--accent2);"></div>
            </div>
          </div>
        </div>
        <div class="stat-card orange">
          <div class="stat-label">ç·è³‡ç”£ï¼ˆæ¨å®šï¼‰</div>
          <div class="stat-value">Â¥3,840,000</div>
          <div class="stat-change up">â–² å‰æœˆæ¯” +Â¥68,000</div>
          <div style="margin-top: 12px;">
            <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text2);margin-bottom:4px;">
              <span>ç›®æ¨™è³‡ç”£ Â¥50Mï¼ˆ35æ­³ï¼‰</span><span>7.7%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:7.7%;background:var(--accent);"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Middle row -->
      <div class="grid-65">
        <!-- Chart -->
        <div class="card">
          <div class="card-title">
            æ”¯å‡ºãƒˆãƒ¬ãƒ³ãƒ‰
            <div class="tabs" style="margin:0;">
              <div class="tab active" id="tab3m" onclick="switchChart('3m')">3ãƒ¶æœˆ</div>
              <div class="tab" id="tab6m" onclick="switchChart('6m')">6ãƒ¶æœˆ</div>
              <div class="tab" id="tab1y" onclick="switchChart('1y')">1å¹´</div>
            </div>
          </div>
          <div class="chart-area">
            <canvas class="chart" id="trendChart"></canvas>
          </div>
          <div style="display:flex;gap:16px;margin-top:12px;font-size:12px;color:var(--text2);">
            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--accent);margin-right:5px;"></span>æ”¯å‡º</span>
            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--accent2);margin-right:5px;"></span>è²¯è“„</span>
            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--warn);margin-right:5px;"></span>äºˆç®—ä¸Šé™</span>
          </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
          <div class="card-title">æœ€è¿‘ã®å–å¼• <a style="font-size:11px;color:var(--accent);cursor:pointer;font-weight:400;" onclick="showSection('expense', document.querySelectorAll('.nav-item')[1])">ã™ã¹ã¦è¦‹ã‚‹</a></div>
          <div class="tx-item">
            <div class="tx-icon" style="background:rgba(255,181,71,0.15);">ğŸœ</div>
            <div class="tx-info">
              <div class="tx-name">ãƒ©ãƒ¼ãƒ¡ãƒ³ä¸€è˜­</div>
              <div class="tx-cat">é£Ÿè²» â€¢ <span class="tx-date">æœ¬æ—¥</span></div>
            </div>
            <div class="tx-amount neg">-Â¥980</div>
          </div>
          <div class="tx-item">
            <div class="tx-icon" style="background:rgba(108,143,255,0.15);">ğŸšƒ</div>
            <div class="tx-info">
              <div class="tx-name">Suica ãƒãƒ£ãƒ¼ã‚¸</div>
              <div class="tx-cat">äº¤é€šè²» â€¢ <span class="tx-date">æ˜¨æ—¥</span></div>
            </div>
            <div class="tx-amount neg">-Â¥3,000</div>
          </div>
          <div class="tx-item">
            <div class="tx-icon" style="background:rgba(74,240,176,0.15);">ğŸ’¼</div>
            <div class="tx-info">
              <div class="tx-name">çµ¦ä¸æŒ¯è¾¼</div>
              <div class="tx-cat">åå…¥ â€¢ <span class="tx-date">6/25</span></div>
            </div>
            <div class="tx-amount pos">+Â¥280,000</div>
          </div>
          <div class="tx-item">
            <div class="tx-icon" style="background:rgba(255,95,109,0.15);">ğŸ </div>
            <div class="tx-info">
              <div class="tx-name">å®¶è³ƒ</div>
              <div class="tx-cat">ä½å±…è²» â€¢ <span class="tx-date">6/1</span></div>
            </div>
            <div class="tx-amount neg">-Â¥75,000</div>
          </div>
          <div class="tx-item">
            <div class="tx-icon" style="background:rgba(74,240,176,0.15);">ğŸ“±</div>
            <div class="tx-info">
              <div class="tx-name">æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«</div>
              <div class="tx-cat">é€šä¿¡è²» â€¢ <span class="tx-date">6/3</span></div>
            </div>
            <div class="tx-amount neg">-Â¥1,078</div>
          </div>
        </div>
      </div>

      <!-- Bottom row -->
      <div class="grid-2">
        <!-- AI Advice preview -->
        <div class="card">
          <div class="card-title">ğŸ’¡ ä»Šæœˆã®AIã‚¢ãƒ‰ãƒã‚¤ã‚¹</div>
          <div class="advice-card">
            <div class="advice-title">âš ï¸ é£Ÿè²»ãŒäºˆç®—ã®92%ã«é”ã—ã¦ã„ã¾ã™</div>
            <div class="advice-text">å…ˆæœˆã‚ˆã‚Šå¤–é£ŸãŒå¢—ãˆã¦ã„ã¾ã™ã€‚æ®‹ã‚Š7æ—¥ã§Â¥2,800ã®ä½™è£•ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚è‡ªç‚Šã‚’å¢—ã‚„ã™ã‹ã€ã‚³ãƒ³ãƒ“ãƒ‹åˆ©ç”¨ã‚’æ§ãˆã‚‹ã¨æ”¹å–„ã§ãã¾ã™ã€‚</div>
          </div>
          <div class="advice-card">
            <div class="advice-title">âœ… è²¯è“„ç›®æ¨™ã¾ã§ã‚ã¨å°‘ã—ã§ã™</div>
            <div class="advice-text">ä»Šæœˆã®è²¯è“„ç›®æ¨™Â¥60,000ã¾ã§Â¥3,200ã§ã™ã€‚ç¾åœ¨ã®ãƒšãƒ¼ã‚¹ã‚’ç¶­æŒã™ã‚Œã°é”æˆã§ãã¾ã™ã€‚ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥ç›®æ¨™ã«ç€å®Ÿã«è¿‘ã¥ã„ã¦ã„ã¾ã™ï¼</div>
          </div>
          <button class="btn btn-ghost" style="width:100%;margin-top:4px;" onclick="showSection('advice', document.querySelectorAll('.nav-item')[4])">è©³ç´°ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¦‹ã‚‹ â†’</button>
        </div>

        <!-- Life goals -->
        <div class="card">
          <div class="card-title">ğŸ¯ ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ã®é€²æ—</div>
          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ  ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥ <span class="tag blue">æœ€å„ªå…ˆ</span></div>
              <div class="goal-year">2028å¹´ï¼ˆ3å¹´å¾Œï¼‰</div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:4px;">
              <span>é ­é‡‘ Â¥500ä¸‡ç›®æ¨™</span><span style="color:var(--accent2);">Â¥384ä¸‡ / Â¥500ä¸‡</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:76.8%;background:var(--accent2);"></div>
            </div>
          </div>
          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ‘¶ ç¬¬ä¸€å­èª•ç”Ÿ <span class="tag orange">è¨ˆç”»ä¸­</span></div>
              <div class="goal-year">2026å¹´ï¼ˆ1å¹´å¾Œï¼‰</div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:4px;">
              <span>æº–å‚™è³‡é‡‘ Â¥100ä¸‡ç›®æ¨™</span><span style="color:var(--warn);">Â¥42ä¸‡ / Â¥100ä¸‡</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:42%;background:var(--warn);"></div>
            </div>
          </div>
          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ–ï¸ FIREé”æˆ <span class="tag green">é•·æœŸ</span></div>
              <div class="goal-year">2045å¹´ï¼ˆ20å¹´å¾Œï¼‰</div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:4px;">
              <span>ç›®æ¨™è³‡ç”£ Â¥5,000ä¸‡</span><span style="color:var(--green);">Â¥384ä¸‡ / Â¥5,000ä¸‡</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" style="width:7.7%;background:var(--green);"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- EXPENSE -->
    <div id="expense" class="section">
      <div class="page-header">
        <div>
          <div class="page-title">æ”¯å‡ºç®¡ç†</div>
          <div class="page-sub">ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ”¯å‡ºã‚’ç¢ºèªãƒ»ç™»éŒ²ã§ãã¾ã™</div>
        </div>
        <div class="header-actions">
          <button class="btn btn-ghost">ğŸ“¥ CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
          <button class="btn btn-primary" onclick="openExpenseModal()">ï¼‹ æ”¯å‡ºã‚’è¿½åŠ </button>
        </div>
      </div>

      <div class="grid-65">
        <!-- Category breakdown -->
        <div class="card">
          <div class="card-title">ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºï¼ˆ6æœˆï¼‰</div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#ff7eb3;"></div>
            <div class="budget-name">ğŸ  ä½å±…è²»</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:100%;background:#ff7eb3;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥75,000</div><div class="budget-limit">/ Â¥75,000</div></div>
            <div class="budget-pct" style="color:var(--red);">100%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#ffb547;"></div>
            <div class="budget-name">ğŸœ é£Ÿè²»</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:92%;background:#ffb547;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥27,600</div><div class="budget-limit">/ Â¥30,000</div></div>
            <div class="budget-pct" style="color:var(--warn);">92%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#6c8fff;"></div>
            <div class="budget-name">ğŸšƒ äº¤é€šè²»</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:68%;background:#6c8fff;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥10,200</div><div class="budget-limit">/ Â¥15,000</div></div>
            <div class="budget-pct">68%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#4af0b0;"></div>
            <div class="budget-name">ğŸ® å¨¯æ¥½ãƒ»è¶£å‘³</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:45%;background:#4af0b0;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥9,000</div><div class="budget-limit">/ Â¥20,000</div></div>
            <div class="budget-pct" style="color:var(--green);">45%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#a78bfa;"></div>
            <div class="budget-name">ğŸ‘• è¡£é¡ãƒ»æ—¥ç”¨å“</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:60%;background:#a78bfa;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥12,000</div><div class="budget-limit">/ Â¥20,000</div></div>
            <div class="budget-pct">60%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#2edd8e;"></div>
            <div class="budget-name">ğŸ“± é€šä¿¡è²»ãƒ»ã‚µãƒ–ã‚¹ã‚¯</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:55%;background:#2edd8e;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥5,500</div><div class="budget-limit">/ Â¥10,000</div></div>
            <div class="budget-pct">55%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#60a5fa;"></div>
            <div class="budget-name">ğŸ¥ åŒ»ç™‚ãƒ»å¥åº·</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:20%;background:#60a5fa;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥2,000</div><div class="budget-limit">/ Â¥10,000</div></div>
            <div class="budget-pct" style="color:var(--green);">20%</div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#f97316;"></div>
            <div class="budget-name">ğŸº äº¤éš›è²»</div>
            <div style="flex:2;">
              <div class="progress-track"><div class="progress-fill" style="width:40%;background:#f97316;"></div></div>
            </div>
            <div class="budget-amounts"><div class="budget-spent">Â¥4,000</div><div class="budget-limit">/ Â¥10,000</div></div>
            <div class="budget-pct" style="color:var(--green);">40%</div>
          </div>
        </div>

        <!-- Pie chart -->
        <div class="card" style="display:flex;flex-direction:column;">
          <div class="card-title">æ”¯å‡ºæ§‹æˆ</div>
          <div style="display:flex;align-items:center;justify-content:center;flex:1;padding:10px 0;">
            <canvas id="pieChart" width="200" height="200"></canvas>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:10px;">
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#ff7eb3;"></span>ä½å±… 52.4%</div>
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#ffb547;"></span>é£Ÿè²» 19.3%</div>
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#6c8fff;"></span>äº¤é€š 7.1%</div>
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#4af0b0;"></span>å¨¯æ¥½ 6.3%</div>
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#a78bfa;"></span>è¡£é¡ 8.4%</div>
            <div style="font-size:11px;color:var(--text2);display:flex;align-items:center;gap:5px;"><span style="display:block;width:8px;height:8px;border-radius:50%;background:#2edd8e;"></span>ãã®ä»– 6.5%</div>
          </div>
        </div>
      </div>

      <!-- Transaction list -->
      <div class="card">
        <div class="card-title">å–å¼•å±¥æ­´
          <div style="display:flex;gap:8px;align-items:center;">
            <input type="text" placeholder="æ¤œç´¢..." style="background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-sm);padding:5px 10px;color:var(--text);font-size:12px;width:140px;outline:none;font-family:inherit;">
            <select style="background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-sm);padding:5px 10px;color:var(--text2);font-size:12px;outline:none;font-family:inherit;">
              <option>ã™ã¹ã¦</option><option>é£Ÿè²»</option><option>ä½å±…è²»</option>
            </select>
          </div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(255,181,71,0.15);">ğŸœ</div>
          <div class="tx-info"><div class="tx-name">ãƒ©ãƒ¼ãƒ¡ãƒ³ä¸€è˜­</div><div class="tx-cat">é£Ÿè²» â€¢ 2025/6/29</div></div>
          <span class="tag orange">é£Ÿè²»</span>
          <div class="tx-amount neg">-Â¥980</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(108,143,255,0.15);">ğŸšƒ</div>
          <div class="tx-info"><div class="tx-name">Suica ãƒãƒ£ãƒ¼ã‚¸</div><div class="tx-cat">äº¤é€šè²» â€¢ 2025/6/28</div></div>
          <span class="tag blue">äº¤é€šè²»</span>
          <div class="tx-amount neg">-Â¥3,000</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(167,139,250,0.15);">ğŸ›’</div>
          <div class="tx-info"><div class="tx-name">ã‚³ã‚¹ãƒˆã‚³ æ—¥ç”¨å“</div><div class="tx-cat">æ—¥ç”¨å“ â€¢ 2025/6/27</div></div>
          <span class="tag" style="background:rgba(167,139,250,0.15);color:#a78bfa;">æ—¥ç”¨å“</span>
          <div class="tx-amount neg">-Â¥8,500</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(249,115,22,0.15);">ğŸº</div>
          <div class="tx-info"><div class="tx-name">å±…é…’å±‹ åŒåƒšã¨</div><div class="tx-cat">äº¤éš›è²» â€¢ 2025/6/26</div></div>
          <span class="tag orange">äº¤éš›è²»</span>
          <div class="tx-amount neg">-Â¥4,000</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(74,240,176,0.15);">ğŸ’¼</div>
          <div class="tx-info"><div class="tx-name">çµ¦ä¸æŒ¯è¾¼</div><div class="tx-cat">åå…¥ â€¢ 2025/6/25</div></div>
          <span class="tag green">åå…¥</span>
          <div class="tx-amount pos">+Â¥280,000</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(96,165,250,0.15);">ğŸ¥</div>
          <div class="tx-info"><div class="tx-name">æ­¯ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯</div><div class="tx-cat">åŒ»ç™‚è²» â€¢ 2025/6/22</div></div>
          <span class="tag blue">åŒ»ç™‚è²»</span>
          <div class="tx-amount neg">-Â¥2,000</div>
        </div>
        <div class="tx-item">
          <div class="tx-icon" style="background:rgba(255,126,179,0.15);">ğŸ </div>
          <div class="tx-info"><div class="tx-name">å®¶è³ƒ 6æœˆåˆ†</div><div class="tx-cat">ä½å±…è²» â€¢ 2025/6/1</div></div>
          <span class="tag red">ä½å±…è²»</span>
          <div class="tx-amount neg">-Â¥75,000</div>
        </div>
      </div>
    </div>

    <!-- BUDGET & GOALS -->
    <div id="budget" class="section">
      <div class="page-header">
        <div>
          <div class="page-title">äºˆç®—ãƒ»ç›®æ¨™ç®¡ç†</div>
          <div class="page-sub">æœˆæ¬¡äºˆç®—ã¨ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ã®ç›®æ¨™ã‚’è¨­å®šãƒ»ç¢ºèªã§ãã¾ã™</div>
        </div>
        <div class="header-actions">
          <button class="btn btn-ghost" onclick="openChat('budget')">ğŸ¤– ãƒãƒ£ãƒƒãƒˆã§å†è¨­å®š</button>
          <button class="btn btn-primary">äºˆç®—ã‚’ç·¨é›†</button>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-title">æœˆæ¬¡äºˆç®—è¨­å®š</div>
          <div style="margin-bottom:12px;padding:12px;background:var(--bg);border-radius:var(--radius-sm);display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div style="font-size:12px;color:var(--text2);">æœˆåå…¥</div>
              <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:700;">Â¥280,000</div>
            </div>
            <div style="text-align:right;">
              <div style="font-size:12px;color:var(--text2);">æœˆè²¯è“„ç›®æ¨™</div>
              <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:700;color:var(--accent);">Â¥60,000</div>
            </div>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#ff7eb3;"></div>
            <div class="budget-name">ğŸ  ä½å±…è²»</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥75,000</div></div>
            <span class="tag" style="background:rgba(255,181,71,0.1);color:var(--warn);font-size:10px;">å›ºå®šè²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#ffb547;"></div>
            <div class="budget-name">ğŸœ é£Ÿè²»</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥30,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#6c8fff;"></div>
            <div class="budget-name">ğŸšƒ äº¤é€šè²»</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥15,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#4af0b0;"></div>
            <div class="budget-name">ğŸ® å¨¯æ¥½ãƒ»è¶£å‘³</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥20,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#a78bfa;"></div>
            <div class="budget-name">ğŸ‘• è¡£é¡ãƒ»æ—¥ç”¨å“</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥20,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#2edd8e;"></div>
            <div class="budget-name">ğŸ“± é€šä¿¡ãƒ»ã‚µãƒ–ã‚¹ã‚¯</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥10,000</div></div>
            <span class="tag" style="background:rgba(255,181,71,0.1);color:var(--warn);font-size:10px;">å›ºå®šè²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#60a5fa;"></div>
            <div class="budget-name">ğŸ¥ åŒ»ç™‚ãƒ»å¥åº·</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥10,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div class="budget-item">
            <div class="budget-dot" style="background:#f97316;"></div>
            <div class="budget-name">ğŸº äº¤éš›è²»</div>
            <div class="budget-amounts"><div class="budget-spent">Â¥10,000</div></div>
            <span class="tag" style="background:rgba(74,240,176,0.1);color:var(--green);font-size:10px;">å¤‰å‹•è²»</span>
          </div>
          <div style="margin-top:12px;padding-top:12px;border-top:1px solid var(--border);display:flex;justify-content:space-between;">
            <span style="font-size:13px;color:var(--text2);">äºˆç®—åˆè¨ˆ</span>
            <span style="font-family:'Syne',sans-serif;font-weight:700;color:var(--accent);">Â¥190,000</span>
          </div>
          <div style="display:flex;justify-content:space-between;margin-top:4px;">
            <span style="font-size:13px;color:var(--text2);">æ®‹ã‚Šï¼ˆè²¯è“„ + ç©ç«‹ï¼‰</span>
            <span style="font-family:'Syne',sans-serif;font-weight:700;">Â¥90,000</span>
          </div>
        </div>

        <div class="card">
          <div class="card-title">ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ç›®æ¨™</div>
          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ  ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥</div>
              <div style="display:flex;gap:6px;">
                <span class="tag blue">æœ€å„ªå…ˆ</span>
                <span style="font-size:11px;color:var(--text2);">2028å¹´ç›®æ¨™</span>
              </div>
            </div>
            <div style="font-size:12px;color:var(--text2);line-height:1.7;">ç›®æ¨™é ­é‡‘: <strong style="color:var(--text);">Â¥500ä¸‡</strong>ã€€æœˆç©ç«‹é¡: <strong style="color:var(--accent2);">Â¥30,000</strong></div>
            <div class="progress-track" style="margin-top:8px;"><div class="progress-fill" style="width:76.8%;background:var(--accent2);"></div></div>
            <div class="goal-amounts"><span>Â¥384ä¸‡ è²¯è“„æ¸ˆã¿</span><span>é”æˆã¾ã§ Â¥116ä¸‡</span></div>
          </div>

          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ‘¶ è‚²å…æº–å‚™è³‡é‡‘</div>
              <div style="display:flex;gap:6px;">
                <span class="tag orange">è¨ˆç”»ä¸­</span>
                <span style="font-size:11px;color:var(--text2);">2026å¹´ç›®æ¨™</span>
              </div>
            </div>
            <div style="font-size:12px;color:var(--text2);line-height:1.7;">ç›®æ¨™é¡: <strong style="color:var(--text);">Â¥100ä¸‡</strong>ã€€æœˆç©ç«‹é¡: <strong style="color:var(--warn);">Â¥15,000</strong></div>
            <div class="progress-track" style="margin-top:8px;"><div class="progress-fill" style="width:42%;background:var(--warn);"></div></div>
            <div class="goal-amounts"><span>Â¥42ä¸‡ è²¯è“„æ¸ˆã¿</span><span>é”æˆã¾ã§ Â¥58ä¸‡</span></div>
          </div>

          <div class="goal-card">
            <div class="goal-header">
              <div class="goal-title">ğŸ–ï¸ FIREï¼ˆæ—©æœŸé€€è·ï¼‰</div>
              <div style="display:flex;gap:6px;">
                <span class="tag green">é•·æœŸ</span>
                <span style="font-size:11px;color:var(--text2);">2045å¹´ç›®æ¨™</span>
              </div>
            </div>
            <div style="font-size:12px;color:var(--text2);line-height:1.7;">ç›®æ¨™è³‡ç”£: <strong style="color:var(--text);">Â¥5,000ä¸‡</strong>ã€€æœˆç©ç«‹é¡: <strong style="color:var(--green);">Â¥15,000</strong></div>
            <div class="progress-track" style="margin-top:8px;"><div class="progress-fill" style="width:7.7%;background:var(--green);"></div></div>
            <div class="goal-amounts"><span>Â¥384ä¸‡ é”æˆæ¸ˆã¿</span><span>é”æˆã¾ã§ Â¥4,616ä¸‡</span></div>
          </div>

          <button class="btn btn-ghost" style="width:100%;margin-top:4px;" onclick="openChat('goal')">ï¼‹ æ–°ã—ã„ç›®æ¨™ã‚’è¿½åŠ </button>
        </div>
      </div>
    </div>

    <!-- FUTURE DESIGN -->
    <div id="future" class="section">
      <div class="page-header">
        <div>
          <div class="page-title">å°†æ¥è¨­è¨ˆ & ç¢ºç‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</div>
          <div class="page-sub">ç¾åœ¨ã®æ”¯å‡ºãƒ»è²¯è“„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å…ƒã«ç›®æ¨™é”æˆç¢ºç‡ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™</div>
        </div>
        <div class="header-actions">
          <button class="btn btn-ghost">âš™ï¸ å‰ææ¡ä»¶ã‚’å¤‰æ›´</button>
        </div>
      </div>

      <div class="grid-3">
        <div class="card" style="text-align:center;padding:24px 20px;">
          <div class="card-title" style="justify-content:center;">ğŸ  ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥ 2028å¹´</div>
          <div class="gauge-wrap">
            <div class="gauge-container">
              <canvas class="gauge" id="gauge1" width="180" height="120"></canvas>
              <div class="gauge-center"><div class="gauge-pct">76%</div><div class="gauge-label">é”æˆç¢ºç‡</div></div>
            </div>
          </div>
          <div style="font-size:12px;color:var(--text2);margin-top:8px;">ç¾åœ¨ã®ãƒšãƒ¼ã‚¹ã§<strong style="color:var(--accent);">2027å¹´11æœˆ</strong>ã«é”æˆè¦‹è¾¼ã¿</div>
          <div style="margin-top:10px;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
            <div style="font-size:11px;color:var(--text2);">æœˆç©ç«‹+Â¥5,000ã§ç¢ºç‡ãŒ</div>
            <div style="font-size:14px;color:var(--green);font-weight:700;">76% â†’ 89%</div>
          </div>
        </div>
        <div class="card" style="text-align:center;padding:24px 20px;">
          <div class="card-title" style="justify-content:center;">ğŸ‘¶ è‚²å…è³‡é‡‘ 2026å¹´</div>
          <div class="gauge-wrap">
            <div class="gauge-container">
              <canvas class="gauge" id="gauge2" width="180" height="120"></canvas>
              <div class="gauge-center"><div class="gauge-pct" style="color:var(--warn);">52%</div><div class="gauge-label">é”æˆç¢ºç‡</div></div>
            </div>
          </div>
          <div style="font-size:12px;color:var(--text2);margin-top:8px;">ç¾åœ¨ã®ãƒšãƒ¼ã‚¹ã§ã¯<strong style="color:var(--red);">Â¥18ä¸‡ä¸è¶³</strong>ã®è¦‹è¾¼ã¿</div>
          <div style="margin-top:10px;padding:10px;background:rgba(255,181,71,0.08);border-radius:var(--radius-sm);border:1px solid rgba(255,181,71,0.2);">
            <div style="font-size:11px;color:var(--warn);">âš ï¸ æœˆç©ç«‹ã‚’Â¥8,000å¢—ã‚„ã™ã“ã¨ã‚’æ¨å¥¨</div>
          </div>
        </div>
        <div class="card" style="text-align:center;padding:24px 20px;">
          <div class="card-title" style="justify-content:center;">ğŸ–ï¸ FIRE 2045å¹´</div>
          <div class="gauge-wrap">
            <div class="gauge-container">
              <canvas class="gauge" id="gauge3" width="180" height="120"></canvas>
              <div class="gauge-center"><div class="gauge-pct" style="color:var(--accent2);">63%</div><div class="gauge-label">é”æˆç¢ºç‡</div></div>
            </div>
          </div>
          <div style="font-size:12px;color:var(--text2);margin-top:8px;">æŠ•è³‡åˆ©å›ã‚Šæƒ³å®š: <strong style="color:var(--accent2);">å¹´5%ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰</strong></div>
          <div style="margin-top:10px;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
            <div style="font-size:11px;color:var(--text2);">æŠ•è³‡æ¯”ç‡ã‚’ä¸Šã’ã‚‹ã“ã¨ã§</div>
            <div style="font-size:14px;color:var(--green);font-weight:700;">63% â†’ 78%</div>
          </div>
        </div>
      </div>

      <!-- Asset projection chart -->
      <div class="card" style="margin-bottom:20px;">
        <div class="card-title">
          è³‡ç”£æ¨ç§»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç¢ºç‡ãƒ¢ãƒ‡ãƒ«ï¼‰
          <div style="display:flex;gap:8px;align-items:center;">
            <span style="font-size:11px;color:var(--text2);">ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³• 1000å›è©¦è¡Œ</span>
          </div>
        </div>
        <div class="chart-area" style="height:240px;">
          <canvas class="chart" id="projectionChart"></canvas>
        </div>
        <div style="display:flex;gap:16px;margin-top:12px;font-size:12px;color:var(--text2);">
          <span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:rgba(74,240,176,0.3);margin-right:5px;"></span>90%ä¿¡é ¼åŒºé–“</span>
          <span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:rgba(74,240,176,0.6);margin-right:5px;"></span>ä¸­å¤®å€¤ï¼ˆ50%ï¼‰</span>
          <span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:var(--accent2);margin-right:5px;"></span>ç›®æ¨™ãƒ©ã‚¤ãƒ³</span>
        </div>
      </div>

      <!-- Breakdown -->
      <div class="grid-2">
        <div class="card">
          <div class="card-title">ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒ</div>
          <div style="overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;font-size:13px;">
              <thead>
                <tr style="color:var(--text2);font-size:11px;letter-spacing:0.5px;">
                  <th style="text-align:left;padding:8px 0;font-weight:600;">ã‚·ãƒŠãƒªã‚ª</th>
                  <th style="text-align:right;padding:8px 0;font-weight:600;">35æ­³è³‡ç”£</th>
                  <th style="text-align:right;padding:8px 0;font-weight:600;">FIREé”æˆ</th>
                  <th style="text-align:right;padding:8px 0;font-weight:600;">ç¢ºç‡</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-top:1px solid var(--border);">
                  <td style="padding:10px 0;">ç¾çŠ¶ç¶­æŒ</td>
                  <td style="padding:10px 0;text-align:right;font-weight:500;">Â¥1,280ä¸‡</td>
                  <td style="padding:10px 0;text-align:right;">2048å¹´</td>
                  <td style="padding:10px 0;text-align:right;"><span class="tag orange">63%</span></td>
                </tr>
                <tr style="border-top:1px solid var(--border);">
                  <td style="padding:10px 0;color:var(--accent);">é£Ÿè²»å‰Šæ¸› (-Â¥5,000)</td>
                  <td style="padding:10px 0;text-align:right;font-weight:500;color:var(--green);">Â¥1,460ä¸‡</td>
                  <td style="padding:10px 0;text-align:right;">2046å¹´</td>
                  <td style="padding:10px 0;text-align:right;"><span class="tag green">71%</span></td>
                </tr>
                <tr style="border-top:1px solid var(--border);">
                  <td style="padding:10px 0;color:var(--accent);">å‰¯åå…¥ +Â¥30,000/æœˆ</td>
                  <td style="padding:10px 0;text-align:right;font-weight:500;color:var(--green);">Â¥1,840ä¸‡</td>
                  <td style="padding:10px 0;text-align:right;">2043å¹´</td>
                  <td style="padding:10px 0;text-align:right;"><span class="tag green">82%</span></td>
                </tr>
                <tr style="border-top:1px solid var(--border);">
                  <td style="padding:10px 0;color:var(--text2);">æ‚²è¦³ã‚·ãƒŠãƒªã‚ª</td>
                  <td style="padding:10px 0;text-align:right;font-weight:500;color:var(--red);">Â¥820ä¸‡</td>
                  <td style="padding:10px 0;text-align:right;color:var(--red);">2055å¹´+</td>
                  <td style="padding:10px 0;text-align:right;"><span class="tag red">34%</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card">
          <div class="card-title">å‰ææ¡ä»¶</div>
          <div style="display:flex;flex-direction:column;gap:10px;">
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">å¹´é½¢</span><span style="font-weight:600;">30æ­³</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">æœˆåå…¥ï¼ˆç¨å¼•å¾Œï¼‰</span><span style="font-weight:600;">Â¥280,000</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">å¹´åä¸Šæ˜‡ç‡ï¼ˆæƒ³å®šï¼‰</span><span style="font-weight:600;color:var(--accent);">3% / å¹´</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">æŠ•è³‡åˆ©å›ã‚Šï¼ˆæƒ³å®šï¼‰</span><span style="font-weight:600;color:var(--accent2);">5% / å¹´</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">ã‚¤ãƒ³ãƒ•ãƒ¬ç‡ï¼ˆæƒ³å®šï¼‰</span><span style="font-weight:600;">2% / å¹´</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:var(--bg);border-radius:var(--radius-sm);">
              <span style="font-size:13px;">æœˆæŠ•è³‡é¡ï¼ˆç¾åœ¨ï¼‰</span><span style="font-weight:600;color:var(--green);">Â¥15,000</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ADVICE -->
    <div id="advice" class="section">
      <div class="page-header">
        <div>
          <div class="page-title">AIãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚¢ãƒ‰ãƒã‚¤ã‚¹</div>
          <div class="page-sub">éå»ã®æ”¯å‡ºå±¥æ­´ã¨ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ã‚’è¸ã¾ãˆãŸå€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã§ã™</div>
        </div>
      </div>

      <div class="grid-65">
        <div>
          <div class="card" style="margin-bottom:16px;">
            <div class="card-title">ğŸš¨ ç·Šæ€¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä»Šæœˆä¸­ï¼‰</div>
            <div class="advice-card" style="border-color:rgba(255,95,109,0.2);background:rgba(255,95,109,0.05);">
              <div class="advice-title" style="color:var(--red);">âš ï¸ è‚²å…æº–å‚™è³‡é‡‘ã®ç©ç«‹ãŒä¸è¶³ã—ã¦ã„ã¾ã™</div>
              <div class="advice-text">2026å¹´ã®ç¬¬ä¸€å­èª•ç”Ÿã«å‘ã‘ã¦ã€ç¾åœ¨ã®ç©ç«‹ãƒšãƒ¼ã‚¹ï¼ˆÂ¥15,000/æœˆï¼‰ã§ã¯Â¥18ä¸‡ä¸è¶³ã™ã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚æ¥æœˆã‹ã‚‰Â¥23,000/æœˆã«å¢—é¡ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚é£Ÿè²»äºˆç®—ã‚’Â¥5,000å‰Šæ¸›ã—ã€å¨¯æ¥½è²»ã‚’Â¥3,000æŠ‘ãˆã‚‹ã“ã¨ã§é”æˆå¯èƒ½ã§ã™ã€‚</div>
            </div>
            <div class="advice-card" style="border-color:rgba(255,181,71,0.2);background:rgba(255,181,71,0.05);">
              <div class="advice-title" style="color:var(--warn);">ğŸ“Š é£Ÿè²»ãŒ2ãƒ¶æœˆé€£ç¶šã§äºˆç®—è¶…éã—ã¦ã„ã¾ã™</div>
              <div class="advice-text">3æœˆï¼ˆ+Â¥3,200ï¼‰ã€4æœˆï¼ˆ+Â¥5,100ï¼‰ã¨é€£ç¶šè¶…éä¸­ã§ã™ã€‚å¤–é£Ÿã®å›æ•°ãŒå…ˆæœˆæ¯”30%å¢—ãˆã¦ã„ã¾ã™ã€‚é€±3å›ã®è‡ªç‚Šã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã§æœˆÂ¥8,000ä»¥ä¸Šã®ç¯€ç´„ãŒå¯èƒ½ã§ã™ã€‚</div>
            </div>
          </div>

          <div class="card" style="margin-bottom:16px;">
            <div class="card-title">ğŸ’¡ æ”¹å–„ææ¡ˆï¼ˆä»Šæœˆã€œ3ãƒ¶æœˆï¼‰</div>
            <div class="advice-card">
              <div class="advice-title">ğŸ“± ã‚µãƒ–ã‚¹ã‚¯ã‚’è¦‹ç›´ã™ã¨æœˆÂ¥3,400ç¯€ç´„ã§ãã¾ã™</div>
              <div class="advice-text">ç¾åœ¨: Netflix(Â¥1,490) + Spotify(Â¥980) + Amazon Prime(Â¥600) + ä»–3ã‚µãƒ¼ãƒ“ã‚¹ã€‚åˆ†æã®çµæœã€Netflixåˆ©ç”¨é »åº¦ãŒæœˆ2å›ä»¥ä¸‹ã§ã™ã€‚ä¸€æ™‚åœæ­¢ã—ã¦å¹´é–“Â¥17,880ã®ç¯€ç´„ã‚’æ¤œè¨ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</div>
            </div>
            <div class="advice-card">
              <div class="advice-title">ğŸ  ä½å±…è²»ã®è¦‹ç›´ã—ã§ãƒã‚¤ãƒ›ãƒ¼ãƒ é”æˆãŒ2ãƒ¶æœˆæ—©ã¾ã‚Šã¾ã™</div>
              <div class="advice-text">ç¾åœ¨ã®å®¶è³ƒ(Â¥75,000)ã¯æ‰‹å–ã‚Šã®26.8%ã§ã™ã€‚è¿‘éš£ã®åŒæ¡ä»¶ç‰©ä»¶ã®ç›¸å ´ã‚’èª¿ã¹ã‚‹ã¨Â¥65,000ã€œ70,000ã®ç‰©ä»¶ã‚‚ã‚ã‚Šã¾ã™ã€‚æœˆÂ¥5,000ã®å‰Šæ¸›ã§é ­é‡‘é”æˆãŒ2027å¹´9æœˆâ†’7æœˆã«æ—©ã¾ã‚Šã¾ã™ã€‚</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">âœ… ç¶™ç¶šã§ãã¦ã„ã‚‹ã“ã¨ï¼ˆè‰¯ã„ç‚¹ï¼‰</div>
            <div class="advice-card" style="border-color:rgba(46,221,142,0.2);background:rgba(46,221,142,0.05);">
              <div class="advice-title" style="color:var(--green);">ğŸ‰ é€šä¿¡è²»ã®æœ€é©åŒ–ãŒã§ãã¦ã„ã¾ã™</div>
              <div class="advice-text">æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ã¸ã®ä¹—ã‚Šæ›ãˆã§æœˆÂ¥5,000ä»¥ä¸Šã®ç¯€ç´„ã‚’ç¶™ç¶šä¸­ã€‚1å¹´é–“ã§Â¥60,000ä»¥ä¸Šã®ç¯€ç´„å®Ÿç¸¾ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å§¿å‹¢ã‚’é£Ÿè²»ã«ã‚‚æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚</div>
            </div>
            <div class="advice-card" style="border-color:rgba(46,221,142,0.2);background:rgba(46,221,142,0.05);">
              <div class="advice-title" style="color:var(--green);">ğŸ“ˆ è²¯è“„ç¿’æ…£ãŒå®šç€ã—ã¦ã„ã¾ã™</div>
              <div class="advice-text">éå»6ãƒ¶æœˆé€£ç¶šã§è²¯è“„ç›®æ¨™ã®90%ä»¥ä¸Šã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚ãƒã‚¤ãƒ›ãƒ¼ãƒ é ­é‡‘ç›®æ¨™ã¾ã§ç€å®Ÿã«é€²ã‚“ã§ã„ã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¹ã‚’ç¶­æŒã—ã¦ãã ã•ã„ï¼</div>
            </div>
          </div>
        </div>

        <div>
          <div class="card" style="margin-bottom:16px;">
            <div class="card-title">ğŸ“Š ä»Šæœˆã®ã‚¹ã‚³ã‚¢</div>
            <div style="text-align:center;padding:20px 0;">
              <div style="font-family:'Syne',sans-serif;font-size:64px;font-weight:800;line-height:1;background:linear-gradient(135deg, var(--accent), var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">72</div>
              <div style="font-size:13px;color:var(--text2);margin-top:4px;">/ 100ç‚¹</div>
              <div style="margin-top:12px;font-size:12px;color:var(--text2);">å…ˆæœˆæ¯” <strong style="color:var(--green);">+5ç‚¹</strong> æ”¹å–„ä¸­ï¼</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px;">
              <div>
                <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px;"><span>æ”¯å‡ºç®¡ç†</span><span style="color:var(--warn);">65/100</span></div>
                <div class="progress-track"><div class="progress-fill" style="width:65%;background:var(--warn);"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px;"><span>è²¯è“„é”æˆç‡</span><span style="color:var(--accent);">95/100</span></div>
                <div class="progress-track"><div class="progress-fill" style="width:95%;background:var(--accent);"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px;"><span>ç›®æ¨™é€²æ—</span><span style="color:var(--accent2);">70/100</span></div>
                <div class="progress-track"><div class="progress-fill" style="width:70%;background:var(--accent2);"></div></div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">ğŸ“… æ¥æœˆã®ç›®æ¨™</div>
            <div style="display:flex;flex-direction:column;gap:8px;">
              <div style="padding:12px;background:var(--bg);border-radius:var(--radius-sm);border-left:3px solid var(--accent);">
                <div style="font-size:13px;font-weight:500;">é£Ÿè²»ã‚’Â¥27,000ä»¥å†…ã«</div>
                <div style="font-size:11px;color:var(--text2);margin-top:3px;">å¤–é£Ÿã‚’é€±2å›ä»¥å†…ã«åˆ¶é™</div>
              </div>
              <div style="padding:12px;background:var(--bg);border-radius:var(--radius-sm);border-left:3px solid var(--accent2);">
                <div style="font-size:13px;font-weight:500;">è‚²å…ç©ç«‹ã‚’Â¥23,000ã«</div>
                <div style="font-size:11px;color:var(--text2);margin-top:3px;">å…ˆæœˆã‹ã‚‰+Â¥8,000å¢—é¡</div>
              </div>
              <div style="padding:12px;background:var(--bg);border-radius:var(--radius-sm);border-left:3px solid var(--warn);">
                <div style="font-size:13px;font-weight:500;">Netflixåœæ­¢ã‚’æ¤œè¨</div>
                <div style="font-size:11px;color:var(--text2);margin-top:3px;">æœˆÂ¥1,490ã®ç¯€ç´„ã«ãªã‚Šã¾ã™</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- Chat Setup Overlay -->
<div class="chat-overlay" id="chatOverlay">
  <div class="chat-modal">
    <div class="chat-header">
      <div>
        <h3>ğŸ¤– KakeAI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</h3>
        <div style="font-size:12px;color:var(--text2);margin-top:2px;">ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§è¨­å®šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</div>
      </div>
      <button class="close-btn" onclick="closeChat()">âœ•</button>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="msg bot">
        <div class="msg-avatar">ğŸ¤–</div>
        <div>
          <div class="msg-bubble">ã“ã‚“ã«ã¡ã¯ï¼KakeAIã¸ã‚ˆã†ã“ãã€‚ã¾ãšã‚ãªãŸã®ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ã«ã¤ã„ã¦ã„ãã¤ã‹æ•™ãˆã¦ãã ã•ã„ã€‚ç¾åœ¨ã®çŠ¶æ³ã‚’ç¢ºèªã—ãªãŒã‚‰ã€æœ€é©ãªäºˆç®—ã¨ç›®æ¨™ã‚’ä¸€ç·’ã«è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</div>
          <div class="msg-options">
            <button class="msg-opt" onclick="sendMsg(this, 'åˆæœŸè¨­å®šã‚’å§‹ã‚ã‚‹')">åˆæœŸè¨­å®šã‚’å§‹ã‚ã‚‹</button>
            <button class="msg-opt" onclick="sendMsg(this, 'ç›®æ¨™ã‚’å¤‰æ›´ã—ãŸã„')">ç›®æ¨™ã‚’å¤‰æ›´ã—ãŸã„</button>
            <button class="msg-opt" onclick="sendMsg(this, 'äºˆç®—ã‚’è¦‹ç›´ã—ãŸã„')">äºˆç®—ã‚’è¦‹ç›´ã—ãŸã„</button>
          </div>
        </div>
      </div>
    </div>
    <div class="chat-input-area">
      <input class="chat-input" id="chatInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." onkeydown="if(event.key==='Enter')sendChatInput()">
      <button class="btn btn-primary" onclick="sendChatInput()">é€ä¿¡</button>
    </div>
  </div>
</div>

<!-- Add Expense Overlay -->
<div class="chat-overlay" id="expenseOverlay">
  <div class="expense-modal">
    <div class="chat-header">
      <h3>ğŸ’³ æ”¯å‡ºã‚’è¿½åŠ </h3>
      <button class="close-btn" onclick="closeExpenseModal()">âœ•</button>
    </div>
    <div style="padding:20px 24px;">
      <div class="form-group">
        <label class="form-label">é‡‘é¡</label>
        <input class="form-input" type="number" placeholder="0" style="font-size:24px;font-family:'Syne',sans-serif;font-weight:700;">
      </div>
      <div class="form-group">
        <label class="form-label">ã‚«ãƒ†ã‚´ãƒª</label>
        <div class="cat-grid">
          <div class="cat-chip sel"><span>ğŸœ</span>é£Ÿè²»</div>
          <div class="cat-chip"><span>ğŸ </span>ä½å±…è²»</div>
          <div class="cat-chip"><span>ğŸšƒ</span>äº¤é€šè²»</div>
          <div class="cat-chip"><span>ğŸ®</span>å¨¯æ¥½</div>
          <div class="cat-chip"><span>ğŸ‘•</span>è¡£é¡</div>
          <div class="cat-chip"><span>ğŸ“±</span>é€šä¿¡è²»</div>
          <div class="cat-chip"><span>ğŸ¥</span>åŒ»ç™‚</div>
          <div class="cat-chip"><span>ğŸº</span>äº¤éš›è²»</div>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
        <input class="form-input" type="text" placeholder="ä¾‹: ãƒ©ãƒ³ãƒã€ã‚³ãƒ³ãƒ“ãƒ‹...">
      </div>
      <div class="form-group">
        <label class="form-label">æ—¥ä»˜</label>
        <input class="form-input" type="date" value="2025-06-29">
      </div>
      <div style="display:flex;gap:10px;margin-top:4px;">
        <button class="btn btn-ghost" style="flex:1;" onclick="closeExpenseModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn btn-primary" style="flex:2;" onclick="addExpense()">è¿½åŠ ã™ã‚‹</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Navigation
  function showSection(id, el) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if (el) el.classList.add('active');
    if (id === 'future') drawProjectionChart();
    if (id === 'expense') drawPieChart();
  }

  // Charts
  function drawTrendChart() {
    const canvas = document.getElementById('trendChart');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.offsetWidth * devicePixelRatio;
    canvas.height = canvas.offsetHeight * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);
    const w = canvas.offsetWidth, h = canvas.offsetHeight;

    const months = ['4æœˆ','5æœˆ','6æœˆ'];
    const spending = [168000, 134900, 143200];
    const savings = [52000, 65100, 56800];
    const budget = [180000, 180000, 180000];
    const maxV = 210000;

    ctx.clearRect(0,0,w,h);
    const pad = { l:40, r:20, t:10, b:24 };
    const cw = w - pad.l - pad.r;
    const ch = h - pad.t - pad.b;

    function xPos(i) { return pad.l + (i / (months.length - 1)) * cw; }
    function yPos(v) { return pad.t + ch - (v / maxV) * ch; }

    // Grid
    [0, 0.25, 0.5, 0.75, 1].forEach(f => {
      const y = pad.t + ch * (1 - f);
      ctx.strokeStyle = 'rgba(255,255,255,0.05)';
      ctx.lineWidth = 1;
      ctx.beginPath(); ctx.moveTo(pad.l, y); ctx.lineTo(w - pad.r, y); ctx.stroke();
      ctx.fillStyle = 'rgba(255,255,255,0.25)';
      ctx.font = '10px Noto Sans JP';
      ctx.fillText('Â¥' + ((maxV * f) / 10000).toFixed(0) + 'ä¸‡', 0, y + 3);
    });

    function drawLine(data, color, dashed) {
      ctx.beginPath();
      if (dashed) ctx.setLineDash([5,4]); else ctx.setLineDash([]);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2.5;
      ctx.lineJoin = 'round';
      data.forEach((v,i) => { i===0 ? ctx.moveTo(xPos(i),yPos(v)) : ctx.lineTo(xPos(i),yPos(v)); });
      ctx.stroke();
      ctx.setLineDash([]);
      data.forEach((v,i) => {
        ctx.beginPath();
        ctx.arc(xPos(i), yPos(v), 4, 0, Math.PI*2);
        ctx.fillStyle = color;
        ctx.fill();
      });
    }
    drawLine(budget, 'rgba(255,181,71,0.6)', true);
    drawLine(savings, '#6c8fff', false);
    drawLine(spending, '#4af0b0', false);

    // Month labels
    months.forEach((m,i) => {
      ctx.fillStyle = 'rgba(255,255,255,0.4)';
      ctx.font = '11px Noto Sans JP';
      ctx.textAlign = 'center';
      ctx.fillText(m, xPos(i), h - 4);
    });
  }

  function drawPieChart() {
    const canvas = document.getElementById('pieChart');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    const size = 200;
    canvas.width = size * devicePixelRatio;
    canvas.height = size * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);

    const data = [
      { v: 75000, c: '#ff7eb3' },
      { v: 27600, c: '#ffb547' },
      { v: 10200, c: '#6c8fff' },
      { v: 9000, c: '#4af0b0' },
      { v: 12000, c: '#a78bfa' },
      { v: 9400, c: '#2edd8e' },
    ];
    const total = data.reduce((a,b)=>a+b.v,0);
    let angle = -Math.PI/2;
    const cx = size/2, cy = size/2, r = 80, inner = 52;

    data.forEach(d => {
      const sweep = (d.v / total) * Math.PI * 2;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, r, angle, angle + sweep);
      ctx.closePath();
      ctx.fillStyle = d.c;
      ctx.fill();
      ctx.beginPath();
      ctx.arc(cx, cy, inner, 0, Math.PI*2);
      ctx.fillStyle = '#131929';
      ctx.fill();
      angle += sweep;
    });
  }

  function drawGauge(id, pct, color) {
    const canvas = document.getElementById(id);
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    canvas.width = 180 * devicePixelRatio;
    canvas.height = 120 * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);

    const cx = 90, cy = 90, r = 70;
    const startA = Math.PI, endA = 2 * Math.PI;

    ctx.beginPath();
    ctx.arc(cx, cy, r, startA, endA);
    ctx.strokeStyle = 'rgba(255,255,255,0.07)';
    ctx.lineWidth = 14;
    ctx.lineCap = 'round';
    ctx.stroke();

    const fillEnd = startA + (pct / 100) * Math.PI;
    ctx.beginPath();
    ctx.arc(cx, cy, r, startA, fillEnd);
    ctx.strokeStyle = color || '#4af0b0';
    ctx.lineWidth = 14;
    ctx.lineCap = 'round';
    ctx.stroke();
  }

  function drawProjectionChart() {
    const canvas = document.getElementById('projectionChart');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.offsetWidth * devicePixelRatio;
    canvas.height = canvas.offsetHeight * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);
    const w = canvas.offsetWidth, h = canvas.offsetHeight;

    const years = [2025,2028,2031,2034,2037,2040,2043,2045];
    const median = [384, 720, 1200, 1900, 2800, 3700, 4600, 5200];
    const high = [384, 900, 1600, 2600, 3900, 5100, 6500, 7500];
    const low = [384, 520, 820, 1200, 1700, 2100, 2600, 3000];
    const target = [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000];
    const maxV = 8000;

    const pad = {l:50,r:20,t:10,b:28};
    const cw = w - pad.l - pad.r;
    const ch = h - pad.t - pad.b;

    function xP(i) { return pad.l + (i/(years.length-1))*cw; }
    function yP(v) { return pad.t + ch - (v/maxV)*ch; }

    ctx.clearRect(0,0,w,h);

    // Grid
    [0,.25,.5,.75,1].forEach(f=>{
      const y = pad.t + ch*(1-f);
      ctx.strokeStyle='rgba(255,255,255,0.04)';ctx.lineWidth=1;
      ctx.beginPath();ctx.moveTo(pad.l,y);ctx.lineTo(w-pad.r,y);ctx.stroke();
      ctx.fillStyle='rgba(255,255,255,0.25)';ctx.font='10px Noto Sans JP';ctx.textAlign='right';
      ctx.fillText('Â¥'+(maxV*f/100).toFixed(0)+'ç™¾ä¸‡',pad.l-4,y+3);
    });

    // Confidence band
    ctx.beginPath();
    high.forEach((v,i)=>i===0?ctx.moveTo(xP(i),yP(v)):ctx.lineTo(xP(i),yP(v)));
    low.slice().reverse().forEach((v,i)=>ctx.lineTo(xP(low.length-1-i),yP(v)));
    ctx.closePath();
    ctx.fillStyle='rgba(74,240,176,0.08)';
    ctx.fill();

    function line(data,color,dash,lw) {
      ctx.beginPath();
      if(dash)ctx.setLineDash(dash);else ctx.setLineDash([]);
      ctx.strokeStyle=color;ctx.lineWidth=lw||2;ctx.lineJoin='round';
      data.forEach((v,i)=>i===0?ctx.moveTo(xP(i),yP(v)):ctx.lineTo(xP(i),yP(v)));
      ctx.stroke();ctx.setLineDash([]);
    }
    line(target,'rgba(108,143,255,0.5)',[6,4],1.5);
    line(high,'rgba(74,240,176,0.3)',null,1.5);
    line(low,'rgba(74,240,176,0.3)',null,1.5);
    line(median,'rgba(74,240,176,0.9)',null,2.5);

    median.forEach((v,i)=>{
      ctx.beginPath();ctx.arc(xP(i),yP(v),3.5,0,Math.PI*2);
      ctx.fillStyle='#4af0b0';ctx.fill();
    });

    years.forEach((y,i)=>{
      ctx.fillStyle='rgba(255,255,255,0.3)';ctx.font='10px Noto Sans JP';ctx.textAlign='center';
      ctx.fillText(y,xP(i),h-6);
    });
  }

  // Chat
  const chatResponses = {
    'åˆæœŸè¨­å®šã‚’å§‹ã‚ã‚‹': {
      text: 'ã¾ãšåŸºæœ¬æƒ…å ±ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚ç¾åœ¨ã®æœˆåï¼ˆç¨å¼•å¾Œï¼‰ã¯ãŠã‚ˆãã„ãã‚‰ã§ã™ã‹ï¼Ÿ',
      opts: ['Â¥20ã€œ25ä¸‡', 'Â¥25ã€œ30ä¸‡', 'Â¥30ã€œ40ä¸‡', 'Â¥40ä¸‡ä»¥ä¸Š']
    },
    'Â¥25ã€œ30ä¸‡': {
      text: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æ¬¡ã«ã€æœ€ã‚‚é‡è¦ãªãƒ©ã‚¤ãƒ•ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ•™ãˆã¦ãã ã•ã„ã€‚',
      opts: ['ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥', 'çµå©šãƒ»è‚²å…', 'æ—©æœŸé€€è·ï¼ˆFIREï¼‰', 'ç•™å­¦ãƒ»ã‚­ãƒ£ãƒªã‚¢ãƒã‚§ãƒ³ã‚¸']
    },
    'ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥': {
      text: 'ç´ æ™´ã‚‰ã—ã„ç›®æ¨™ã§ã™ã­ï¼ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥ã®ç›®æ¨™å¹´ã¯ï¼Ÿã¾ãŸã€ç”¨æ„ã§ãã‚‹é ­é‡‘ã®ç›®å®‰ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
      opts: ['3å¹´ä»¥å†…ãƒ»Â¥300ä¸‡ã€œ', '5å¹´ä»¥å†…ãƒ»Â¥500ä¸‡ã€œ', '10å¹´ä»¥å†…ãƒ»Â¥1,000ä¸‡ã€œ', 'ã¾ã æœªå®š']
    },
    '3å¹´ä»¥å†…ãƒ»Â¥300ä¸‡ã€œ': {
      text: 'äº†è§£ã—ã¾ã—ãŸï¼æœˆÂ¥35,000ã®ç©ç«‹ã§ã¡ã‚‡ã†ã©é–“ã«åˆã„ã¾ã™ã€‚é£Ÿè²»ã¯Â¥28,000ã€å¨¯æ¥½è²»ã¯Â¥18,000ã‚’ä¸Šé™ã«è¨­å®šã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿã“ã®å†…å®¹ã§ä¿å­˜ã—ã¦ã‚ˆã„ã§ã™ã‹ï¼Ÿ',
      opts: ['âœ… ã“ã®å†…å®¹ã§ä¿å­˜ã™ã‚‹', 'ğŸ”§ ä¸€éƒ¨å¤‰æ›´ã—ãŸã„']
    },
    'âœ… ã“ã®å†…å®¹ã§ä¿å­˜ã™ã‚‹': {
      text: 'ğŸ‰ è¨­å®šå®Œäº†ã§ã™ï¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«åæ˜ ã•ã‚Œã¾ã—ãŸã€‚æ¯æœˆæœ«ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’LINEã§ãŠé€ã‚Šã—ã¾ã™ã€‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼',
      opts: []
    },
    'ç›®æ¨™ã‚’å¤‰æ›´ã—ãŸã„': {
      text: 'ã©ã®ç›®æ¨™ã‚’å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ',
      opts: ['ãƒã‚¤ãƒ›ãƒ¼ãƒ è³¼å…¥ã®æ™‚æœŸ', 'è‚²å…æº–å‚™è³‡é‡‘', 'FIREç›®æ¨™é¡', 'æ–°ã—ã„ç›®æ¨™ã‚’è¿½åŠ ']
    },
    'äºˆç®—ã‚’è¦‹ç›´ã—ãŸã„': {
      text: 'ã©ã®ã‚«ãƒ†ã‚´ãƒªã®äºˆç®—ã‚’å¤‰æ›´ã—ãŸã„ã§ã™ã‹ï¼Ÿ',
      opts: ['é£Ÿè²»', 'å¨¯æ¥½ãƒ»è¶£å‘³', 'äº¤éš›è²»', 'ã™ã¹ã¦è¦‹ç›´ã—ãŸã„']
    }
  };

  function sendMsg(btn, text) {
    const body = document.getElementById('chatBody');
    const userMsg = document.createElement('div');
    userMsg.className = 'msg user';
    userMsg.innerHTML = `<div class="msg-bubble">${text}</div>`;
    body.appendChild(userMsg);

    btn.parentElement.querySelectorAll('.msg-opt').forEach(b => b.disabled = true);

    setTimeout(() => {
      const resp = chatResponses[text];
      if (!resp) return;
      const botMsg = document.createElement('div');
      botMsg.className = 'msg bot';
      const optsHtml = resp.opts.map(o => `<button class="msg-opt" onclick="sendMsg(this, '${o}')">${o}</button>`).join('');
      botMsg.innerHTML = `<div class="msg-avatar">ğŸ¤–</div><div><div class="msg-bubble">${resp.text}</div><div class="msg-options">${optsHtml}</div></div>`;
      body.appendChild(botMsg);
      body.scrollTop = body.scrollHeight;
    }, 600);

    body.scrollTop = body.scrollHeight;
  }

  function sendChatInput() {
    const input = document.getElementById('chatInput');
    const v = input.value.trim();
    if (!v) return;
    const body = document.getElementById('chatBody');
    const userMsg = document.createElement('div');
    userMsg.className = 'msg user';
    userMsg.innerHTML = `<div class="msg-bubble">${v}</div>`;
    body.appendChild(userMsg);
    input.value = '';
    setTimeout(() => {
      const botMsg = document.createElement('div');
      botMsg.className = 'msg bot';
      botMsg.innerHTML = `<div class="msg-avatar">ğŸ¤–</div><div><div class="msg-bubble">æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚ç¾åœ¨ã®æƒ…å ±ã‚’å…ƒã«æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’å†è¨ˆç®—ã—ã¾ã™ã€‚å°‘ã—ãŠå¾…ã¡ãã ã•ã„...</div></div>`;
      body.appendChild(botMsg);
      body.scrollTop = body.scrollHeight;
    }, 500);
  }

  function openChat(type) { document.getElementById('chatOverlay').classList.add('open'); }
  function closeChat() { document.getElementById('chatOverlay').classList.remove('open'); }
  function openExpenseModal() { document.getElementById('expenseOverlay').classList.add('open'); }
  function closeExpenseModal() { document.getElementById('expenseOverlay').classList.remove('open'); }

  function addExpense() {
    closeExpenseModal();
    // Success feedback
    const toast = document.createElement('div');
    toast.style.cssText = 'position:fixed;bottom:24px;right:24px;background:#1a2235;border:1px solid rgba(74,240,176,0.3);color:#4af0b0;padding:12px 20px;border-radius:12px;font-size:13px;font-weight:500;z-index:999;animation:fadeUp 0.3s ease;';
    toast.textContent = 'âœ… æ”¯å‡ºã‚’è¿½åŠ ã—ã¾ã—ãŸ';
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }

  function switchChart(period) {
    document.querySelectorAll('[id^="tab"]').forEach(t => t.classList.remove('active'));
    document.getElementById('tab'+period).classList.add('active');
    drawTrendChart();
  }

  // Cat chips
  document.querySelectorAll('.cat-chip').forEach(chip => {
    chip.addEventListener('click', function() {
      document.querySelectorAll('.cat-chip').forEach(c => c.classList.remove('sel'));
      this.classList.add('sel');
    });
  });

  // Close on backdrop
  ['chatOverlay','expenseOverlay'].forEach(id => {
    document.getElementById(id).addEventListener('click', function(e) {
      if (e.target === this) this.classList.remove('open');
    });
  });

  // Init
  window.addEventListener('load', () => {
    setTimeout(drawTrendChart, 100);
    drawGauge('gauge1', 76, '#4af0b0');
    drawGauge('gauge2', 52, '#ffb547');
    drawGauge('gauge3', 63, '#6c8fff');
  });
  window.addEventListener('resize', drawTrendChart);
</script>
</body>
</html>
